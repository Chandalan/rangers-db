# import Campaign from 'fragments.graphql'

query getMyCampaigns(
  $userId: String!,
  $limit: Int!,
  $offset: Int!
) {
  user: rangers_users_by_pk(id: $userId) {
    campaigns(
      order_by: { updated_at: desc, campaign_id: asc }
      limit: $limit
      offset: $offset
    ) {
      campaign {
			  ...Campaign
      }
    }
  }
}

query getMyCampaignsTotal(
  $userId: String!
) {
  user: rangers_users_by_pk(id: $userId) {
    campaigns_aggregate {
      aggregate {
        count
      }
    }
  }
}

query getCampaign(
  $campaignId: Int!
) {
  campaign:rangers_campaign_by_pk(id: $campaignId) {
    ...Campaign
  }
}

mutation createCampaign(
  $name: String!,
) {
  campaign: insert_rangers_campaign_one(
    object: {
      name: $name
    }
  ) {
    ...Campaign
  }
}

mutation addFriendToCampaign(
  $campaignId: Int!,
  $userId: String!
) {
  insert_rangers_campaign_access_one(
    object: {
      campaign_id: $campaignId,
      user_id: $userId
    }
    on_conflict: {
      constraint: campaign_access_pkey
      update_columns: [campaign_id, user_id]
    }
  ) {
    user_id
    campaign_id
  }
}